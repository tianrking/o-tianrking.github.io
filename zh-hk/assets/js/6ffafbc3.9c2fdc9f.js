"use strict";(self.webpackChunkEl_Jardin_Secreto_de_w0x7ce=self.webpackChunkEl_Jardin_Secreto_de_w0x7ce||[]).push([[5066],{4577:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>_,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>d});var s=i(4848),t=i(8453);const c={},l=void 0,r={id:"comunicaciones/Bluetooth/hack_esp",title:"hack_esp",description:"1. \u51c6\u5907ESP32\u8bbe\u5907\u548c\u5f00\u53d1\u73af\u5883",source:"@site/docs/comunicaciones/Bluetooth/hack_esp.md",sourceDirName:"comunicaciones/Bluetooth",slug:"/comunicaciones/Bluetooth/hack_esp",permalink:"/zh-hk/comunicaciones/Bluetooth/hack_esp",draft:!1,unlisted:!1,editUrl:"https://github.com/tianrking/tianrking.github.io/tree/V3.4/docs/comunicaciones/Bluetooth/hack_esp.md",tags:[],version:"current",lastUpdatedAt:1723722162e3,frontMatter:{}},_={},d=[];function o(n){const e={code:"code",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"\u51c6\u5907ESP32\u8bbe\u5907\u548c\u5f00\u53d1\u73af\u5883"}),"\n",(0,s.jsx)(e.li,{children:"\u7f16\u5199\u548c\u90e8\u7f72\u4e0d\u4f7f\u7528PMF\u7684Wi-Fi\u8fde\u63a5\u4ee3\u7801"}),"\n",(0,s.jsx)(e.li,{children:"\u8bbe\u7f6eWi-Fi\u6570\u636e\u5305\u6355\u83b7\u73af\u5883"}),"\n",(0,s.jsx)(e.li,{children:"\u6355\u83b7\u548c\u5206\u6790Wi-Fi\u7ba1\u7406\u5e27"}),"\n",(0,s.jsx)(e.li,{children:"\uff08\u53ef\u9009\uff09\u6f14\u793a\u5b89\u5168\u6f0f\u6d1e"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u8be6\u7ec6\u6b65\u9aa4\u548c\u4ee3\u7801\uff1a"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"ESP32\u8bbe\u5907\u51c6\u5907\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5b89\u88c5ESP-IDF\u5f00\u53d1\u73af\u5883"}),"\n",(0,s.jsx)(e.li,{children:"\u521b\u5efa\u65b0\u9879\u76ee\u6587\u4ef6\u5939"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"ESP32\u4ee3\u7801\uff08\u4e0d\u4f7f\u7528PMF\u7684Wi-Fi\u8fde\u63a5\uff09\uff1a"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-c",children:'#include <string.h>\n#include "freertos/FreeRTOS.h"\n#include "freertos/task.h"\n#include "esp_system.h"\n#include "esp_wifi.h"\n#include "esp_event.h"\n#include "esp_log.h"\n#include "nvs_flash.h"\n\n#define EXAMPLE_ESP_WIFI_SSID      "YOUR_SSID"\n#define EXAMPLE_ESP_WIFI_PASS      "YOUR_PASSWORD"\n\nstatic const char *TAG = "wifi_no_pmf";\n\n// Wi-Fi\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\nstatic void wifi_event_handler(void* arg, esp_event_base_t event_base,\n                               int32_t event_id, void* event_data)\n{\n    // \u5904\u7406Wi-Fi\u8fde\u63a5\u4e8b\u4ef6\n}\n\nvoid app_main(void)\n{\n    // \u521d\u59cb\u5316NVS\n    esp_err_t ret = nvs_flash_init();\n    if (ret == ESP_ERR_NVS_NO_FREE_PAGES || ret == ESP_ERR_NVS_NEW_VERSION_FOUND) {\n        ESP_ERROR_CHECK(nvs_flash_erase());\n        ret = nvs_flash_init();\n    }\n    ESP_ERROR_CHECK(ret);\n\n    // \u521d\u59cb\u5316Wi-Fi\n    ESP_ERROR_CHECK(esp_netif_init());\n    ESP_ERROR_CHECK(esp_event_loop_create_default());\n    esp_netif_create_default_wifi_sta();\n\n    wifi_init_config_t cfg = WIFI_INIT_CONFIG_DEFAULT();\n    ESP_ERROR_CHECK(esp_wifi_init(&cfg));\n\n    // \u6ce8\u518c\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\n    ESP_ERROR_CHECK(esp_event_handler_instance_register(WIFI_EVENT,\n                                                        ESP_EVENT_ANY_ID,\n                                                        &wifi_event_handler,\n                                                        NULL,\n                                                        NULL));\n    ESP_ERROR_CHECK(esp_event_handler_instance_register(IP_EVENT,\n                                                        IP_EVENT_STA_GOT_IP,\n                                                        &wifi_event_handler,\n                                                        NULL,\n                                                        NULL));\n\n    // \u914d\u7f6eWi-Fi\uff08\u7981\u7528PMF\uff09\n    wifi_config_t wifi_config = {\n        .sta = {\n            .ssid = EXAMPLE_ESP_WIFI_SSID,\n            .password = EXAMPLE_ESP_WIFI_PASS,\n            .pmf_cfg = {\n                .capable = false,\n                .required = false\n            },\n        },\n    };\n    ESP_ERROR_CHECK(esp_wifi_set_mode(WIFI_MODE_STA));\n    ESP_ERROR_CHECK(esp_wifi_set_config(WIFI_IF_STA, &wifi_config));\n\n    // \u542f\u52a8Wi-Fi\n    ESP_ERROR_CHECK(esp_wifi_start());\n\n    ESP_LOGI(TAG, "Wi-Fi initialized without PMF. Connecting to AP...");\n}\n\n'})}),"\n",(0,s.jsxs)(e.ol,{start:"3",children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u8bbe\u7f6e\u6570\u636e\u5305\u6355\u83b7\u73af\u5883\uff08Windows\uff09\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u83b7\u53d6\u652f\u6301\u76d1\u542c\u6a21\u5f0f\u7684USB Wi-Fi\u9002\u914d\u5668\uff08\u5982\u57fa\u4e8eAtheros AR9271\u82af\u7247\u7684\u9002\u914d\u5668\uff09"}),"\n",(0,s.jsx)(e.li,{children:"\u5b89\u88c5\u9002\u914d\u5668\u9a71\u52a8\u7a0b\u5e8f"}),"\n",(0,s.jsx)(e.li,{children:"\u5b89\u88c5Wireshark"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u6355\u83b7Wi-Fi\u7ba1\u7406\u5e27\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6253\u5f00Wireshark\uff0c\u9009\u62e9Wi-Fi\u9002\u914d\u5668\u63a5\u53e3"}),"\n",(0,s.jsxs)(e.li,{children:["\u8bbe\u7f6e\u6355\u83b7\u8fc7\u6ee4\u5668\uff1a","\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"wlan.fc.type_subtype == 0x0b || wlan.fc.type_subtype == 0x0c || wlan.fc.type_subtype == 0x00 || wlan.fc.type_subtype == 0x01\n"})}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"\u5f00\u59cb\u6355\u83b7"}),"\n",(0,s.jsx)(e.li,{children:"\u8fd0\u884cESP32\u7a0b\u5e8f\uff0c\u89c2\u5bdf\u8fde\u63a5\u8fc7\u7a0b"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u5206\u6790\u6355\u83b7\u7684\u5e27\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5728Wireshark\u4e2d\u67e5\u770b\u6355\u83b7\u7684\u7ba1\u7406\u5e27"}),"\n",(0,s.jsxs)(e.li,{children:["\u7279\u522b\u5173\u6ce8\uff1a","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8eab\u4efd\u9a8c\u8bc1\u5e27\uff08Authentication frames\uff09"}),"\n",(0,s.jsx)(e.li,{children:"\u5173\u8054\u8bf7\u6c42\u548c\u54cd\u5e94\u5e27\uff08Association request and response frames\uff09"}),"\n",(0,s.jsx)(e.li,{children:"\u89e3\u9664\u5173\u8054\u5e27\uff08Deauthentication frames\uff09"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"\u9a8c\u8bc1\u8fd9\u4e9b\u5e27\u662f\u5426\u4e3a\u660e\u6587\uff0c\u662f\u5426\u5305\u542b\u654f\u611f\u4fe1\u606f"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\uff08\u53ef\u9009\uff09\u5b89\u5168\u6f0f\u6d1e\u6f14\u793a\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4f7f\u7528Aircrack-ng\u5957\u4ef6\uff08\u9700\u8981\u5355\u72ec\u5b89\u88c5\uff09"}),"\n",(0,s.jsxs)(e.li,{children:["\u53d1\u9001\u4f2a\u9020\u7684\u89e3\u9664\u5173\u8054\u5e27\uff1a","\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"aireplay-ng -0 1 -a [AP_MAC] -c [CLIENT_MAC] [INTERFACE]\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u5b89\u5168\u6ce8\u610f\u4e8b\u9879\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u4ec5\u5728\u81ea\u5df1\u7684\u7f51\u7edc\u548c\u8bbe\u5907\u4e0a\u8fdb\u884c\u6d4b\u8bd5"}),"\n",(0,s.jsx)(e.li,{children:"\u4e86\u89e3\u5e76\u9075\u5b88\u5f53\u5730\u7684\u6cd5\u5f8b\u6cd5\u89c4"}),"\n",(0,s.jsx)(e.li,{children:"\u4e0d\u8981\u5728\u672a\u7ecf\u6388\u6743\u7684\u7f51\u7edc\u4e0a\u8fdb\u884c\u6d4b\u8bd5"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u4e2a\u5b9e\u9a8c\u5c55\u793a\u4e86\u672a\u542f\u7528PMF\u65f6Wi-Fi\u7ba1\u7406\u5e27\u7684\u8106\u5f31\u6027\u3002\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u5e94\u59cb\u7ec8\u542f\u7528PMF\u4ee5\u63d0\u9ad8\u5b89\u5168\u6027\u3002\u5f53\u4f60\u7ee7\u7eed\u6df1\u5165\u7814\u7a76\u7f51\u7edc\u5b89\u5168\u65f6\uff0c\u53ef\u4ee5\u6269\u5c55\u8fd9\u4e2a\u5b9e\u9a8c\uff0c\u6bd4\u8f83\u542f\u7528PMF\u524d\u540e\u7684\u5dee\u5f02\uff0c\u6216\u63a2\u7d22\u5176\u4ed6Wi-Fi\u5b89\u5168\u673a\u5236\u3002"})]})}function h(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(o,{...n})}):o(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>l,x:()=>r});var s=i(6540);const t={},c=s.createContext(t);function l(n){const e=s.useContext(c);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:l(n.components),s.createElement(c.Provider,{value:e},n.children)}}}]);